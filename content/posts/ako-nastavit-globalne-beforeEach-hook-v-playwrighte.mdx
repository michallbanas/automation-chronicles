---
title: Ako nastavi콘 glob치lne beforeEach hook v Playwrighte
description: Posledn칰 dobu sk칰코am migrova콘 niektor칠 svoje projekty do Playwrightu a narazil som na probl칠m, ktor칳 sa t칳ka nastavenia glob치lneho beforeEach() hooku. V tomto 캜l치nku sa pozrieme na to, ako to dosiahnu콘.
date: "2024-02-14"
---

## 캛o je beforeEach() hook?

`beforeEach()` hook je funkcia, ktor치 spust칤 dan칳 k칩d pred ka쬯칳m testom v r치mci test s칰boru. V Playwrighte sa d치 pou쬴콘 nasledovne (napr칤klad na otvorenie str치nky pred ka쬯칳m testom):

```js
test.beforeEach(async ({ page }) => {
  await page.goto("https://www.kiwi.com/en/")
})
```

## Ako nastavi콘 glob치lny beforeEach() hook?
Probl칠m v코ak m칪쬰 nasta콘, ak chceme `beforeEach()` nastavi콘 glob치lne pre v코etky testy. T칤, 캜o maj칰 sk칰senosti so Cypressom, vedia, 쬰 tam sa to d치 jednoducho nastavi콘 v support s칰bore (`cypress/support/e2e.js`) a je vybaven칠. Ale ako postupova콘 v pr칤pade Playwrightu?

Na za캜iatok treba poznamena콘, 쬰 u existuje inicat칤va pre t칰to funkcionalitu, a viac si o nej m칪쬰te pre캜칤ta콘 na GitHube Playwrightu [tu](https://github.com/microsoft/playwright/issues/9468) a [tu](https://github.com/microsoft/playwright/issues/19766) 游닀

Je v코ak aj sp칪sob ako to dosiahnu콘 teraz a to pomocou [Automatic fixtures](https://playwright.dev/docs/test-fixtures#automatic-fixtures). Predstavme si teda situ치ciu, 쬰 chceme ma콘 pred ka쬯칳m testom akceptovan칠 cookies, ale nechceme v ka쬯om teste klika콘 na button, aby sme sa zbavili otravn칠ho banneru. Samozrejme, m칪쬰me to urobi콘 podobn칳m sp칪sobom ako v pr칤klade vy코코ie, ale v pr칤pade, 쬰 budeme ma콘 182 testov, tak to mus칤me urobi콘 v 182 testoch, 캜o je dos콘 neefekt칤vne.

Fixtures m칪쬰me ch치pa콘 ako mo쬹os콘 roz코칤ri콘 test konfigur치ciu a prida콘 do nej nejak칠 vlastnosti, ktor칠 potrebujeme. V na코om pr칤pade chceme prida콘 cookies, ktor칠 bud칰 akceptovan칠 pred ka쬯칳m testom. Najprv si vytvor칤me s칰bor `fixtures.ts` a do neho prid치me nasledovn칳 k칩d:

```js
import { test as base } from "@playwright/test"
```

Tento import znamen치, 쬰 importujeme `test` z `@playwright/test` a prirad칤me ho do premennej `base`. Teraz m칪쬰me vytvori콘 nov칰 `test` in코tanciu, ktor칰 roz코칤rime. Hack spo캜칤va v tom, 쬰 do nej ni캜 nedopln칤me, objekt nech치me pr치zdny. Je to z toho d칪vodu, 쬰 tam neprid치vame napr. login alebo obdobn칰 funkcionalitu. My potrebujeme pracova콘 s hooks a tie s칰 캜as콘ou test-runneru. Preto beforeEach navia쬰me na `test` in코tanciu, ktor칰 sme si vytvorili a tam u m칪쬰me nap칤sa콘 k칩d na pridanie cookies:

```js
import { test as base } from "@playwright/test"

export const test = base.extend({})
test.beforeEach(async ({ context }) => {
  await context.addCookies([
    {
      name: "__kwc_agreed",
      value: "true",
      domain: ".kiwi.com",
      path: "/",
    },
  ])
})
```

V tomto bode n치m u sta캜칤 iba jedna zmena, ktor칰 urob칤me v na코ich testoch. 

Namiesto tohto importu:
```js
import { test } from "@playwright/test"
```
Pou쬴jeme tento import:
```js
import { test } from "./fixtures"
```
